"use strict";define(["jquery","core/ajax","core/notification","local_edwiserform/jquery.dataTables","local_edwiserform/dataTables.bootstrap4","local_edwiserform/fixedColumns.bootstrap4"],function(e,t,o){return{init:function(){e(document).ready(function(a){if(0!=e(".efb-wrap-list").data("sesskey")){e(".efb-wrap-list").data("sesskey");var l=e("#efb-forms").DataTable({paging:!0,ordering:!0,bProcessing:!0,bServerSide:!0,rowId:"DT_RowId",bDeferRender:!0,sAjaxSource:M.cfg.wwwroot+"/local/edwiserform/classes/external/get_forms.php",scrollY:"400px",scrollX:!0,scrollCollapse:!0,fixedColumns:{leftColumns:1,rightColumns:1},classes:{sScrollHeadInner:"efb_dataTables_scrollHeadInner"},dom:'<"efb-top"<"efb-listing"l><"efb-list-filtering"f>>t<"efb-bottom"<"efb-form-list-info"i><"efb-list-pagination"p>><"efb-shortcode-copy-note">',columns:[{data:"title"},{data:"type"},{data:"id",orderable:!1},{data:"author"},{data:"created"},{data:"author2"},{data:"modified"},{data:"actions",orderable:!1}],language:{sSearch:M.util.get_string("efb-search-form","local_edwiserform"),emptyTable:M.util.get_string("efb-heading-listforms-empty","local_edwiserform"),info:M.util.get_string("efb-heading-listforms-showing","local_edwiserform",{start:"_START_",end:"_END_",total:"_TOTAL_"}),infoEmpty:M.util.get_string("efb-heading-listforms-showing","local_edwiserform",{start:"0",end:"0",total:"0"})},fnRowCallback:function(t,o,a,l){e("td:eq(0)",t).addClass("efb-tbl-col-title"),e("td:eq(1)",t).addClass("efb-tbl-col-type"),e("td:eq(2)",t).addClass("efb-tbl-col-shortcode").attr("title",M.util.get_string("clickonshortcode","local_edwiserform")),e("td:eq(3)",t).addClass("efb-tbl-col-create"),e("td:eq(4)",t).addClass("efb-tbl-col-modified"),e("td:eq(5)",t).addClass("efb-tbl-col-action-list")},drawCallback:function(t){e(".efb-csv-export").removeClass("dt-button").off(),e(".efb-shortcode-copy-note").html(M.util.get_string("note","local_edwiserform")+" "+M.util.get_string("clickonshortcode","local_edwiserform"))}})}e(".efb-modal-close").click(function(){e("#efb-modal").removeClass("show")}),e("body").on("click",".efb-form-delete",function(t){t.preventDefault();var o=e(this).data("formid"),a=e(this).parents("tr"),l=e(a).children(".efb-tbl-col-title").text();e("#efb-modal .efb-modal-header").removeClass("bg-success").addClass("bg-warning"),e("#efb-modal .efb-modal-title").html(M.util.get_string("warning","local_edwiserform")),e("#efb-modal .efb-modal-body").html("<h5>".concat(M.util.get_string("efb-delete-form-and-data","local_edwiserform",{title:l,id:o}),"</h5>")),e("#efb-modal").addClass("show delete").removeClass("pro deleted"),e("#efb-modal .efb-modal-delete-form").data("formid",o)}),e("body").on("click",".efb-modal-delete-form",function(a){a.preventDefault();var d=e(this).data("formid"),r=e("#efb-form-id-".concat(d));e(r).children(".efb-tbl-col-title").text();t.call([{methodname:"edwiserform_delete_form",args:{id:d}}])[0].done(function(e){1==e.status&&l.row(r).remove().draw()}).fail(o.exception),e(".efb-modal-close").click()});e("body").on("click",".efb-form-export",function(t){t.preventDefault(),e("#efb-modal .efb-modal-header").removeClass("bg-success").addClass("bg-warning"),e("#efb-modal .efb-modal-title").html(M.util.get_string("upgrade","local_edwiserform"));var o,a=M.util.get_string("hey-wait","local_edwiserform"),l=M.util.get_string("efb-form-action-export-title","local_edwiserform"),d=M.util.get_string("export-pro-message","local_edwiserform");d=M.util.get_string("profeaturemessage","local_edwiserform",{type:a+"! <b>"+l+"</b>",message:d}),e("#efb-modal .efb-modal-body").html("\n                        <h5>".concat(d,'</h5>\n                        <div><iframe class="demo" src="').concat((o="export",videotypes.hasOwnProperty(o)?videotypes[o]:videotypes.default),'" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>\n                        </iframe></div>\n                    ')),e("#efb-modal").addClass("show pro").removeClass("delete deleted")}),e("body").on("click",".efb-enable-disable-form",function(o){!function(o){var a=e(o).data("formid");t.call([{methodname:"edwiserform_enable_disable_form",args:{id:a,action:!e(o).is(":checked")}}])[0].done(function(t){t.status?e(o).prop("checked",e(o).is(":checked")):e(o).prop("checked",!e(o).is(":checked")),e(o).parent().attr("title",e(o).is(":checked")?e(o).data("disable-title"):e(o).data("enable-title"))}).fail(function(e){console.log(e)})}(e(this).prev())}),e("body").on("click",".efb-tbl-col-shortcode",function(t){var o=e("<input>");e("body").append(o);var a,l,d=e(this).text();o.val(d).select(),document.execCommand("copy"),o.remove(),a=M.util.get_string("shortcodecoppied","local_edwiserform",d),l=e("<div class='efb-toaster toaster-container'>\n                      <lable class='toaster-message'>".concat(a,"</lable>\n                    </div>")),e("body").append(l),e(l).addClass("show"),setTimeout(function(){e(l).addClass("fade"),setTimeout(function(){e(l).removeClass("fade"),setTimeout(function(){e(l).remove()},300)},2e3)})}),e("body").on("click",".efb-modal-upgrade-pro",function(){window.open(e("#upgrade-url").val())})})}}});