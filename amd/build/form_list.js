"use strict";define(["jquery","core/ajax","local_edwiserform/jquery.dataTables","local_edwiserform/dataTables.bootstrap4","local_edwiserform/fixedColumns.bootstrap4"],function(e,o){return{init:function(){e(document).ready(function(t){if(0!=e(".efb-wrap-list").data("sesskey")){e(".efb-wrap-list").data("sesskey");var a=e("#efb-forms").DataTable({paging:!0,ordering:!0,bProcessing:!0,bServerSide:!0,rowId:"DT_RowId",bDeferRender:!0,sAjaxSource:M.cfg.wwwroot+"/local/edwiserform/classes/external/get_forms.php",scrollY:"400px",scrollX:!0,scrollCollapse:!0,fixedColumns:{leftColumns:1,rightColumns:1},classes:{sScrollHeadInner:"efb_dataTables_scrollHeadInner"},dom:'<"efb-top"<"efb-listing"l><"efb-list-filtering"f>>t<"efb-bottom"<"efb-form-list-info"i><"efb-list-pagination"p>><"efb-shortcode-copy-note">',columns:[{data:"title"},{data:"type"},{data:"id",orderable:!1},{data:"author"},{data:"created"},{data:"author2"},{data:"modified"},{data:"actions",orderable:!1}],language:{sSearch:M.util.get_string("efb-search-form","local_edwiserform")},fnRowCallback:function(o,t,a,l){e("td:eq(0)",o).addClass("efb-tbl-col-title"),e("td:eq(1)",o).addClass("efb-tbl-col-type"),e("td:eq(2)",o).addClass("efb-tbl-col-shortcode"),e("td:eq(3)",o).addClass("efb-tbl-col-create"),e("td:eq(4)",o).addClass("efb-tbl-col-modified"),e("td:eq(5)",o).addClass("efb-tbl-col-action-list")},drawCallback:function(o){e(".efb-csv-export").removeClass("dt-button").off(),e(".efb-shortcode-copy-note").html(M.util.get_string("clickonshortcode","local_edwiserform"))}})}function l(o,t){var a,l,d;o?(a="bg-warning bg-danger",l="bg-success",d=M.util.get_string("success","local_edwiserform")):(a="bg-success bg-warning",l="bg-danger",d=M.util.get_string("danger","local_edwiserform")),e("#efb-modal .efb-modal-header").removeClass(a).addClass(l),e("#efb-modal .efb-modal-title").html(d),e("#efb-modal .efb-modal-body").html("<h5>".concat(t,"</h5>")),e("#efb-modal").addClass("show deleted").removeClass("pro delete")}function d(o){var t=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}(),a=e("<div id='".concat(t,"' class='efb-toaster toaster-container'>\n                      <lable class='toaster-message'>").concat(o,"</lable>\n                    </div>"));e("body").append(a),e(a).addClass("show"),setTimeout(function(){e(a).addClass("fade"),setTimeout(function(){e(a).removeClass("fade"),setTimeout(function(){e(a).remove()},300)},2e3)})}e(".efb-modal-close").click(function(){e("#efb-modal").removeClass("show")}),e("body").on("click",".efb-form-delete",function(o){o.preventDefault();var t=e(this).data("formid"),a=e(this).parents("tr"),l=e(a).children(".efb-tbl-col-title").text();e("#efb-modal .efb-modal-header").removeClass("bg-success").addClass("bg-warning"),e("#efb-modal .efb-modal-title").html(M.util.get_string("warning","local_edwiserform")),e("#efb-modal .efb-modal-body").html("<h5>".concat(M.util.get_string("efb-delete-form-and-data","local_edwiserform",{title:l,id:t}),"</h5>")),e("#efb-modal").addClass("show delete").removeClass("pro deleted"),e("#efb-modal .efb-modal-delete-form").data("formid",t)}),e("body").on("click",".efb-modal-delete-form",function(t){t.preventDefault();var d=e(this).data("formid"),s=e("#efb-form-id-".concat(d));e(s).children(".efb-tbl-col-title").text();o.call([{methodname:"edwiserform_delete_form",args:{id:d}}])[0].done(function(o){e(".efb-modal-close").click(),1==o.status&&a.row(s).remove().draw(),l(o.status,o.msg)}).fail(function(o){e(".efb-modal-close").click(),l(!1,o.msg)})}),e("body").on("click",".efb-form-export",function(o){o.preventDefault(),e("#efb-modal .efb-modal-header").removeClass("bg-success").addClass("bg-warning"),e("#efb-modal .efb-modal-title").html(M.util.get_string("upgrade","local_edwiserform"));var t=M.util.get_string("hey-wait","local_edwiserform"),a=M.util.get_string("efb-form-action-export-title","local_edwiserform"),l=M.util.get_string("export-pro-message","local_edwiserform");l=M.util.get_string("profeaturemessage","local_edwiserform",{type:t+"! <b>"+a+"</b>",message:l}),e("#efb-modal .efb-modal-body").html("<h5>".concat(l,"</h5>")),e("#efb-modal").addClass("show pro").removeClass("delete deleted")}),e("body").on("click",".efb-enable-disable-form",function(t){!function(t){var a=e(t).data("formid");o.call([{methodname:"edwiserform_enable_disable_form",args:{id:a,action:!e(t).is(":checked")}}])[0].done(function(o){o.status?e(t).prop("checked",e(t).is(":checked")):e(t).prop("checked",!e(t).is(":checked")),e(t).parent().attr("title",e(t).is(":checked")?e(t).data("disable-title"):e(t).data("enable-title"))}).fail(function(e){console.log(e)})}(e(this).prev())}),e("body").on("click",".efb-tbl-col-shortcode",function(o){var t=e("<input>");e("body").append(t);var a=e(this).text();t.val(a).select(),document.execCommand("copy"),t.remove(),d(M.util.get_string("shortcodecoppied","local_edwiserform",a))}),e("body").on("click",".efb-modal-upgrade-pro",function(){window.open(e("#upgrade-url").val())})})}}});